Parser.y
 
%{
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
 
typedef struct node {
   char val[10];
   struct node *left, *right;
} Node;
 
Node* createNode(const char* val, Node* left, Node* right) {
   Node* newNode = (Node*)malloc(sizeof(Node));
   strcpy(newNode->val, val);
   newNode->left = left;
   newNode->right = right;
   return newNode;
}
 
void printTree(Node* root, int level) {
   if (!root) return;
   printTree(root->right, level + 1);
   for (int i = 0; i < level; i++) printf("\t");
   printf("%s\n", root->val);
   printTree(root->left, level + 1);
}
 
Node *root;
int yylex(void);
int yyerror(const char *s);
%}
 
%union {
   struct node* nptr;
   char* sval;
}
 
%token <sval> ID
%token '+' '-' '*' '/' '(' ')'
%type <nptr> expr term factor
 
%left '+' '-'
%left '*' '/'
%%
 
input:
     /* empty */
   | input expr ';'   { printf("\nAbstract Syntax Tree:\n"); printTree($2, 0); printf("\n"); }
   | input expr       { printf("\nAbstract Syntax Tree:\n"); printTree($2, 0); printf("\n"); }
   ;
 
expr:
     expr '+' term   { $$ = createNode("+", $1, $3); }
   | expr '-' term   { $$ = createNode("-", $1, $3); }
   | term            { $$ = $1; }
   ;
 
term:
     term '*' factor { $$ = createNode("*", $1, $3); }
   | term '/' factor { $$ = createNode("/", $1, $3); }
   | factor          { $$ = $1; }
   ;
 
factor:
     ID              { $$ = createNode($1, NULL, NULL); free($1); }
   | '(' expr ')'    { $$ = $2; }
   ;
%%
 
int main() {
   printf("Enter expressions (end each with ; or press Ctrl+D):\n");
   yyparse();
   return 0;
}
 
int yyerror(const char *s) {
   fprintf(stderr, "Syntax Error: %s\n", s);
   return 0;
}
 
 
 
 
 
 
Lexer.l
 
%{
#include "y.tab.h"
#include <string.h>
%}
 
%%
[0-9]+              { yylval.sval = strdup(yytext); return ID; }
[a-zA-Z][a-zA-Z0-9]* { yylval.sval = strdup(yytext); return ID; }
[+\-*/()]           { return yytext[0]; }
";"                 { return ';'; }
[ \t\n]             ;    /* ignore whitespace */
.                   { printf("Unknown character: %s\n", yytext); }
%%
 
int yywrap() { return 1; }